{% extends "core/base.html" %}

{% block title %}Patients{% endblock %}

{% block content %}
  <div class="container my-5">
    <div>
      <h1 class="display-4 fw-bold">Patients</h1>
      <div class="mt-2">
        <a href="#" class="grey-link">Add Patient</a>
        <a href="#" class="grey-link">Register New Patient</a>
      </div>
    </div>

    <div class="my-4">
      <table class="table table-bordered">
        <thead>
          <tr>
            <th scope="col">Full Name</th>
            <th scope="col">ID</th>
            <th scope="col">DOB</th>
            <th scope="col">Sex</th>
            <th scope="col">Last Form Submission</th>
          </tr>
        </thead>
        <tbody>
          {% for patient, recent_form_date in patients_with_dates %}
            <tr>
              <td><a href="{% url 'patient_details' patient.user.pk %}">{{ patient.user.first_name }} {{ patient.user.last_name }}</a></td>
              <td class="font-monospace">{{ patient.user.id }}</td>
              <td>{{ patient.dob }}</td>
              <td>{{ patient.get_sex_display }}</td>
              <td>{{ recent_form_date }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% endblock %}
